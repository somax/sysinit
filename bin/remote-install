#!/bin/sh

REMOTEHOST=$1
VERSION=$2
NODE=node-$VERSION-linux-x64.tar.xz
NPM_PACKAGE=npm-global-packs.tgr.xz
if [ ! $REMOTEHOST ] || [ ! $VERSION ] ; then
    echo 'Please specific the remote host, for example: "sysinit remote-install user@192.168.123.100 v6.0.0".'
    exit
fi

echo "copy '$NODE' to remote..."
scp "download/$NODE" "$REMOTEHOST:~/" &&
echo "copy node package to remote..." &&
scp "download/$NPM_PACKAGE" "$REMOTEHOST:~/" &&
echo "install..." &&
ssh -t $REMOTEHOST "
	sudo tar --strip-components 1 -xvf ~/$NODE -C /usr/local
    sudo tar -xvf $NPM_PACKAGE -C /usr/local
" &&
echo "DONE!"
    
